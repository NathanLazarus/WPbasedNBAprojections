define(["jquery","libs/debug"],function(u,m){m=m.init("headerSticky");m.log("header sticky");u.widget("sports.headerSticky",u.fly.base,{_create:function(){this._toggleStickyNav()},_toggleStickyNav:function(){m.log("_toggleStickyNav");var s=u(".ArticleAnchorLinks");var l=u("body");var e=u("#cbs-site-nav");var t=u("#cbs-site-header");var i=u("#hud-container");var p=u('[data-js="gtaag-react"]');var c=u("#cbs-network-bar");var h=u("#saag-content");var v="is-sticky-nav";var g=s.outerHeight()||0;var d=c?c.outerHeight():0;var a="network-bar-spacer";var o=t.length;var f=u("#omni_skybox_leader_sticky").length?true:false;var x=u("#skybox_leader_sticky").length?true:false;var k=u("body").data("sticky-saag");var r=o?t:i;var y=o?e:i;if(c.length||i.length){r.after('<div id="'+a+'" class="'+a+'" style="height: 0"></div>')}var b=u("#network-bar-spacer");u(window).on("scroll resize",function(s){var e=y.outerHeight();var t=k===true?h.outerHeight():0;var i=l.hasClass("skybox-loaded");if(!f&&!x){var a=u('#skybox-top-wrapper div[id*="google_ads_iframe"]>iframe').first().outerHeight();if(i){u("#skybox-top-wrapper").removeAttr("style");b.css({height:0})}else{var o=p.outerHeight();var r=parseInt(u(this).scrollTop());m.log("skyboxHeight",a);if(r<d){m.log("Scroll is less than network bar height so nav is not pinned.");b.css({height:0});y.css({position:"relative"});p.css({position:"relative",top:0});if(k===true){h.css({position:"relative",top:0})}if(l.hasClass(v)){l.removeClass(v)}}else{m.log("Scroll is more than network bar height so Nav is pinned.");b.css({height:e+o+t+"px"});y.css({position:"fixed",top:0});p.css({position:"fixed",top:e-1+"px"});if(k===true){h.css({position:"fixed",top:e-1+"px"})}if(!l.hasClass(v)){l.addClass(v)}}}}else{var a=u("#skybox-top-wrapper").outerHeight();if(i){b.css({height:0});c.css({position:"",top:""})}else{var r=parseInt(u(this).scrollTop());if(f){b.css({height:a+d+e+"px"})}if(r<d){y.css({position:"relative"});c.css({position:"fixed",top:a-r+"px"});y.css({position:"fixed",top:a+d-r+"px"});if(l.hasClass(v)){l.removeClass(v)}}else{c.css({position:"fixed",top:a+"px"});y.css({position:"fixed",top:a+"px"});if(!l.hasClass(v)){l.addClass(v)}}}}if(u("a.namedAnchor").length){var n=e+a+g+t+10;u("a.namedAnchor").css({"margin-top":-n+"px","padding-bottom":n+"px"})}})}})});